Добавить в файл агента. И не забыть поправить во втором параметре адрес сервера Zabbix

UserParameter=unifi.device.discover[*],/etc/zabbix/scripts/unifi.py -server $1 -port $2 -username $3 -password $4
UserParameter=unifi.device.data[*],/etc/zabbix/scripts/unifi.py -server $1 -port $2 -username $3 -password $4 -site $5 -zabbix 127.0.0.1


Шаблон, в принципе, можно прикручивать к любому хосту с агентом. В любом случае, там указывается адрес контроллера. По умолчанию - 127.0.0.1

Пока устройство не добавлено в контроллер, у него нет id. hash_id отсутствует, как минимум, у USG. Будем надеяться, что хотя бы MAC есть всегда и он не меняется :)
В ветке /stat/sta по сайту есть "ap_mac", но для не-AP оно неактуально. Но пусть будет
Внезапно, параметр last_seen отсутствует не только для новых девайсов, но и для некоторых в статусе Adopted. Как так - хз
Satisfaction - не очень понятный параметр. Хз, надо ли оно вообще - отсутствует для GW, а для SW всегда 100. В связи с этим, параметр в шаблоне отключен, а в скрипте две строки, которые к нему относятся - закомментированы. Если нужен - включать по вкусу
Для свитчей можно собирать данные о температуре, перегреве и сколько ватт они отдают.

Для просмотра статуса adopt - нужны права администратора или явно выданные эти права хотя бы на один сайт
Python 3.6 + модуль requests
Zabbix Sender

Unifi Controller  7.5.187
zabbix 6.4

К хосту можно прикрутить стандартные типа SNMP и ICMP. Но к девайсам должен быть доступ с сервера zabbix